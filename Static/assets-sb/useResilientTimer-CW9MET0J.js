import{x as P,l as i,r as fe,B as O}from"./scoreboard-BHT3jrlv.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new t.Error().stack;s&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[s]="b528782b-c2f6-485f-bf81-3914dca9b48c",t._sentryDebugIdIdentifier="sentry-dbid-b528782b-c2f6-485f-bf81-3914dca9b48c")}catch{}})();function de(){const t={},s=(n,r)=>(t[n]||(t[n]=[])).push(r),l=(n,...r)=>(t[n]||[]).forEach(h=>h(...r)),c=(n,r)=>t[n]&&t[n].splice(t[n].indexOf(r),1);return{on:s,off:c,emit:l,once:(n,r)=>{const h=(...T)=>{r(...T),c(n,h)};s(n,h)}}}const we=({state:t,config:s,localConfig:l},{updateState:c,updateConfig:d}={},n=Date.now)=>{let r;s=P(s||{}),l=P(l||{});const h=de(),T=i({get:()=>{var e;return((e=s==null?void 0:s.value)==null?void 0:e.format)??"mm:ss"},set:e=>k({format:e})}),S=i(()=>l.value.format??"mm:ss"),B=i({get:()=>{var e;return((e=s==null?void 0:s.value)==null?void 0:e.title_text)??""},set:e=>k({title_text:e})}),E=i({get:()=>{var e;return(e=s==null?void 0:s.value)==null?void 0:e.end_message},set:e=>k({end_message:e})}),o=P(()=>t.value.counts_up),x=P(()=>t.value.paused),v=i(()=>he(t.value.start_time)),w=i(()=>{var e;return parseInt(((e=t.value)==null?void 0:e.total_time)??15*60*1e3,10)}),H=i(()=>G(w.value)),y=i(()=>g(H.value,j("hh:mm:ss"))),M=i(()=>{var e;return parseInt(((e=t.value)==null?void 0:e.reset_time)??15*60*1e3,10)}),I=i(()=>G(M.value)),F=i(()=>g(I.value,j(l.value.resetTimeFormat??"hh:mm:ss"))),m=fe(t.value.duration),b=i(()=>G(m.value)),N=i(()=>g(b.value,j(T.value))),q=i(()=>g(b.value,j(S.value))),p=i(()=>t.value.paused?"paused":!o.value&&m.value===0&&v.value||o.value&&m.value>=w.value&&v.value?"ended":o.value&&m.value===0&&v.value>Date.now()||v.value&&m.value?"running":"idle"),U=i(()=>p.value==="running"),C=i(()=>U.value?v.value>Date.now():!1),ee=i(()=>{if(m.value===0)return o.value?0:100;const e=(w.value-m.value)*100/w.value;return o.value?Math.min((100-e).toFixed(2),100):Math.max(e.toFixed(2),0)});async function _(e,u){if(e={...t.value,...e},isNaN(e.duration)||e.duration<0||isNaN(e.total_time)||e.total_time<0||e.start_time!==null&&isNaN(e.start_time)||typeof e.counts_up!="boolean")throw new Error("Invalid timer state");return m.value=e.duration,h.emit(u,{...e},{...t.value}),typeof c=="function"?c(e):e}async function k(e){return e={...s.value,...e},typeof d=="function"?d(e):e}function K(){const e=V(v.value,t.value.duration,o.value);if(o.value&&e>=w.value)m.value=w.value,z();else if(!o.value&&e<=0)m.value=0,z();else return m.value=e,r=requestAnimationFrame(K),r}function Q(e=n){return p.value==="ended"?_({start_time:e(),duration:M.value,paused:0},"startTimer"):_({start_time:e(),paused:0},"startTimer")}function W(e){if(t.paused||!v.value||p.value==="ended")return;const u=V(v.value,t.value.duration,o.value),a=typeof e=="function"?e(u):u;return _({paused:Date.now(),start_time:null,duration:a},"pauseTimer")}function te(){return p.value==="running"?W():Q()}function X(e,u=null){const a=typeof e=="number"?e:o.value?0:M.value;return _({start_time:u,duration:a,total_time:o.value?w.value:M.value,paused:0},"resetTimer")}function se(e,u=Date.now){return X(e,U.value?u():null)}function z(){r&&(cancelAnimationFrame(r),r=null)}function ae(){r||(r=requestAnimationFrame(K))}async function Y(e,u=!1){e=parseInt(e,10);const a=p.value==="idle";let f=u?e:m.value+e;const R=!o.value&&(a||s.value.adjust_total_time);if(f<0?f=0:(!R||o.value)&&f>w.value?f=w.value:f>s.value.max_total_time&&(f=s.value.max_total_time),f===m.value)return!0;const A={duration:f};return R&&f>w.value&&(A.total_time=f),a||p.value==="ended"?A.start_time=null:t.value.paused||(A.start_time=n()),await _(A,"handleDurationChange"),!0}function ne(e){return Y(e,!0)}function ue(e,u="ms",a=!1){return Y(J(e,u),a)}async function Z(e,u=!1){if(p.value!=="idle")return!1;e=parseInt(e,10);let a=u?e:t.value.total_time+e;if(a<=0)return!1;if(a>s.value.max_total_time&&(a=s.value.max_total_time),a===t.value.total_time)return!0;const f={total_time:a};return o.value||(f.duration=a),await _(f,"handleTotalTimeChange"),!0}function re(e){return Z(e,!0)}function oe(e,u="ms",a=!1){return Z(J(e,u),a)}async function $(e,u=!1){e=parseInt(e,10);let a=u?e:t.value.reset_time+e;return a<=0?!1:(a>(s.value.max_total_time??1/0)&&(a=s.value.max_total_time),a===t.value.total_time||await _({reset_time:a},"handleResetTimeChange"),!0)}function le(e){return $(e,!0)}function ie(e,u="ms",a=!1){return $(J(e,u),a)}async function L(e,u=!1){const a=typeof e=="boolean"?e:!o.value;if(u){const R=V(v.value||n(),t.value.duration,o.value);await _({duration:R,counts_up:a,start_time:n(),paused:0},"changeDirection");return}const f=a?0:M.value;await _({counts_up:a,duration:f,start_time:null,paused:0},"changeDirection")}async function ce(e=!1){await L(!0,e)}async function me(e=!1){await L(!1,e)}return O([v,x],([e,u])=>{e&&!u?ae():e||z()},{immediate:!0}),O(()=>t.value.duration,e=>{m.value=e}),O(()=>p.value,async(e,u)=>{e==="ended"&&u==="running"&&h.emit("timerEnded")}),{startTimer:Q,pauseTimer:W,toggleTimer:te,resetTimer:X,resetAndContinueTimer:se,changeDirection:L,goUp:ce,goDown:me,countsUp:o,format:T,titleText:B,endMessage:E,status:p,timerRunning:U,timerScheduled:C,startTime:v,progress:ee,duration:m,displayDuration:N,displayLocalDuration:q,durationBreakdown:b,adjustDuration:ue,setDuration:ne,totalTime:w,displayTotalTime:y,totalTimeBreakdown:H,adjustTotalTime:oe,setTotalTime:re,resetTime:M,resetTimeBreakdown:I,displayResetTime:F,adjustResetTime:ie,setResetTime:le,formats:Object.freeze(["hh:mm","hh:mm:ss","hh:mm:ss.ms","mm:ss","mm:ss.ms","ss","ss.ms","ss.S","ss.SS"]),commitState:_,commitConfig:k,timerState:t,timerConfig:s,localConfig:l,updateState:c,updateConfig:d,on:h.on,once:h.once,off:h.off}};function V(t,s,l=!1){if(typeof t!="number"||typeof s!="number")return 0;if(l)return Math.max(0,Date.now()-t+s);const c=Math.max(t,Date.now())-t,d=Math.max(0,s-c);return Math.ceil(d)}function G(t){const s=t,l=Math.floor(t/36e5);t%=36e5;const c=Math.floor(t/6e4);t%=6e4;const d=Math.floor(t/1e3),n=t%1e3,r=l*60+c,h=r*60+d;return{hours:l,minutes:c,seconds:d,milliseconds:n,totalMinutes:r,totalSeconds:h,totalMilliseconds:s}}const D=(t,s)=>t.toString().padStart(s,"0");function g(t,s={}){const{showHours:l=!1,showMilliseconds:c=!1,showMinutes:d=!0,showSeconds:n=!0,blink:r=!0,hoursPad:h=2,minutesPad:T=2,secondsPad:S=2}=s||{},{hours:B,minutes:E,seconds:o,milliseconds:x,totalMinutes:v,totalSeconds:w,totalMilliseconds:H}=t,y=typeof c=="number"?c:3,I=D(Math.floor(x/(y===1?100:y===2?10:1)),y),F=n&&c?"."+I:"";if(!d)return D(w,S)+F;if(!n&&H<60*1e3)return o;const m=!n&&r?x<=500?":":" ":":",b=l?D(B,h)+m:"",N=d?D(l?E:v,T):"",q=n?":"+D(o,S):"";return b+N+q+F}function he(t){return t==null?null:typeof t=="number"?t:1e3*t.seconds+t.nanoseconds/1e6}function J(t,s){switch(t=typeof t=="number"?t:0,s=typeof s=="string"&&s?s:"ms",s){case"h":t*=36e5;break;case"m":case"minutes":t*=6e4;break;case"s":case"seconds":t*=1e3;break}return t}function j(t="mm:ss"){switch(t){case"hh:mm":return{showHours:!0,showMilliseconds:!1,showSeconds:!1};case"hh:mm:ss":return{showHours:!0,showMilliseconds:!1};case"hh:mm:ss.ms":case"hh:mm:ss.SSS":return{showHours:!0,showMilliseconds:!0};case"s":return{showHours:!1,showMinutes:!1,showMilliseconds:!1,secondsPad:1};case"ss":return{showHours:!1,showMinutes:!1,showMilliseconds:!1};case"ss.ms":case"ss.SSS":return{showHours:!1,showMinutes:!1,showMilliseconds:!0};case"s.S":return{showHours:!1,showMinutes:!1,showMilliseconds:1,secondsPad:1};case"ss.S":return{showHours:!1,showMinutes:!1,showMilliseconds:1};case"ss.SS":return{showHours:!1,showMinutes:!1,showMilliseconds:2};case"mm:ss.ms":case"mm:ss.SSS":return{showHours:!1,showMinutes:!0,showMilliseconds:!0};case"mm:ss.S":return{showHours:!1,showMinutes:!0,showMilliseconds:1};case"mm:ss.SS":return{showHours:!1,showMinutes:!0,showMilliseconds:2};case"m:ss":return{showHours:!1,showMilliseconds:!1,minutesPad:1};case"mm:ss":default:return{showHours:!1,showMilliseconds:!1}}}function _e(t={}){const{duration:s=15*60*1e3,total_time:l=s,reset_time:c=s,counts_up:d=!1,start_time:n=null,paused:r=0}=t;return{total_time:l,reset_time:c,duration:s,start_time:n,counts_up:d,paused:r}}export{g as f,G as m,j as s,_e as t,we as u};
//# sourceMappingURL=useResilientTimer-CW9MET0J.js.map
