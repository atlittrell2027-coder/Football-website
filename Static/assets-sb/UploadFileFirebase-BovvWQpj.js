import{ad as F,ae as I,r as C,af as O,i as _,ag as T,ah as U,ai as j,l as E,B as h,c as u,a as f,d as l,a4 as G,u as g,b as $,e as B,aj as N}from"./scoreboard-BHT3jrlv.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new t.Error().stack;s&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[s]="3cac950f-eb02-4674-b58a-fdd1191b9234",t._sentryDebugIdIdentifier="sentry-dbid-3cac950f-eb02-4674-b58a-fdd1191b9234")}catch{}})();function P(t){return F()?(I(t),!0):!1}function V(){const t=new Set,s=n=>{t.delete(n)};return{on:n=>{t.add(n);const e=()=>s(n);return P(e),{off:e}},off:s,trigger:(...n)=>Promise.all(Array.from(t).map(e=>e(...n)))}}const A=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const L=(t,s)=>Object.prototype.hasOwnProperty.call(t,s),R=A?window.document:void 0,W={multiple:!0,accept:"*",reset:!1,directory:!1};function q(t={}){const{document:s=R}=t,a=C(null),{on:c,trigger:n}=V();let e;s&&(e=s.createElement("input"),e.type="file",e.onchange=d=>{const o=d.target;a.value=o.files,n(a.value)});const p=()=>{a.value=null,e&&e.value&&(e.value="",n(null))},m=d=>{if(!e)return;const o={...W,...t,...d};e.multiple=o.multiple,e.accept=o.accept,e.webkitdirectory=o.directory,L(o,"capture")&&(e.capture=o.capture),o.reset&&p(),e.click()};return{files:O(a),open:m,reset:p,onChange:c}}const H={class:"rounded px-2 border border-secondary-subtle"},J=["id"],z={key:0,class:"d-flex flex-row align-items-center"},K=["src"],M={key:1},Q={class:"mt-3 mb-3"},X={class:"d-flex flex-row align-items-center"},Y={key:0},Z={key:1},ee={key:0,class:"ms-3 spinner-border text-primary",role:"status"},oe={__name:"UploadFileFirebase",props:["filename","componentId","boardFolder"],emits:["fileUploaded","fileDeleted"],setup(t,{emit:s}){const a=s,c=t,n=_("read_token"),e=_("image_folder"),p=c.boardFolder??n,m=T(),d=U(m,`${e}/${p}/${c.filename}`);let{url:o,uploadTask:v,upload:k,error:b}=j(d);b&&console.error("Error accessing the file: ",b);const{files:w,open:D}=q(),y=E(()=>!!v.value);h(w,i=>{i&&i.length>0&&k(i[0])}),h(o,i=>{a("fileUploaded",i)});function S(){console.log("Delete image"),o.value=null,N(d).then(()=>{a("fileDeleted")}).catch(i=>{throw i})}return(i,r)=>(f(),u("div",H,[l("button",{id:"upload-"+c.componentId,class:"btn btn-sm btn-danger m-1 d-none",onClick:r[0]||(r[0]=x=>G(o)?o.value="http://localhost:5001/static/images/profile_placeholder.jpg":o="http://localhost:5001/static/images/profile_placeholder.jpg")}," ⚠️ Set image (debug) ",8,J),typeof g(o)=="string"?(f(),u("div",z,[l("div",null,[l("img",{src:g(o),class:"p-2",width:"50"},null,8,K)]),l("button",{class:"btn btn-sm btn-light mx-1 d-block",onClick:S}," Delete ")])):(f(),u("div",M,[l("div",Q,[l("div",X,[l("button",{class:"btn btn-sm btn-light",onClick:r[1]||(r[1]=x=>g(D)({accept:"image/*",multiple:!1}))},[y.value?(f(),u("span",Y,"Uploading...")):(f(),u("span",Z,"Select image to upload"))]),y.value?(f(),u("div",ee,r[2]||(r[2]=[l("span",{class:"visually-hidden"},"Loading...",-1)]))):$("",!0),r[3]||(r[3]=l("div",{class:"small ms-3"},[l("i",{class:"bi bi-info-circle me-1"}),B("A square image works best! Use JPG, PNG, SVG or Gif ")],-1))])])]))]))}};export{oe as default};
//# sourceMappingURL=UploadFileFirebase-BovvWQpj.js.map
